# MinIO Storage Class for S3-backed PVCs
---
apiVersion: v1
kind: Secret
metadata:
  name: minio-secret
  namespace: csi-s3
type: Opaque
stringData:
  accessKeyID: "minioadmin"      # Replace with your MinIO access key
  secretAccessKey: "minioadmin"  # Replace with your MinIO secret key
  endpoint: "http://192.168.1.XXX:9000"  # Replace with your Unraid IP:9000
  region: "us-east-1"
---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: minio-s3
  annotations:
    storageclass.kubernetes.io/is-default-class: "true"
provisioner: s3.csi.min.io
parameters:
  mounter: rclone
  csi.storage.k8s.io/provisioner-secret-name: minio-secret
  csi.storage.k8s.io/provisioner-secret-namespace: csi-s3
  csi.storage.k8s.io/controller-publish-secret-name: minio-secret
  csi.storage.k8s.io/controller-publish-secret-namespace: csi-s3
  csi.storage.k8s.io/node-stage-secret-name: minio-secret
  csi.storage.k8s.io/node-stage-secret-namespace: csi-s3
  csi.storage.k8s.io/node-publish-secret-name: minio-secret
  csi.storage.k8s.io/node-publish-secret-namespace: csi-s3
reclaimPolicy: Delete
volumeBindingMode: Immediate